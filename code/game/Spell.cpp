#include "Spell.hpp"
#include "World.hpp"

#include <iostream>

using std::ostream;

namespace baal {

///////////////////////////////////////////////////////////////////////////////
Spell::Spell(const std::string& name,
             unsigned           spell_level,
             const Location&    location)
///////////////////////////////////////////////////////////////////////////////
  : m_name(name),
    m_spell_level(spell_level),
    m_location(location)
{
}

///////////////////////////////////////////////////////////////////////////////
ostream& Spell::operator<<(ostream& out) const
///////////////////////////////////////////////////////////////////////////////
{
  return out << m_name << '[' << m_spell_level << ']';
}

/*****************************************************************************/

///////////////////////////////////////////////////////////////////////////////
void FireSpell::apply(World& world) const
///////////////////////////////////////////////////////////////////////////////
{
  // TODO Fill in

  WorldTile& affected_tile = world.get_tile(m_location);
  affected_tile.damage(.5);
}

}

///////////////////////////////////////////////////////////////////////////////
ostream& baal::operator<<(ostream& out, const Spell& spell)
///////////////////////////////////////////////////////////////////////////////
{
  return spell.operator<<(out);
}
